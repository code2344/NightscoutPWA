<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0a84ff">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
  <title>Nightscout iOS PWA</title>

  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" sizes="57x57" href="https://raw.githubusercontent.com/nightscout/cgm-remote-monitor/91cd601038a3bce00f92655cc6b1cc02fa3589d3/static/images/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://raw.githubusercontent.com/nightscout/cgm-remote-monitor/91cd601038a3bce00f92655cc6b1cc02fa3589d3/static/images/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://raw.githubusercontent.com/nightscout/cgm-remote-monitor/91cd601038a3bce00f92655cc6b1cc02fa3589d3/static/images/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://raw.githubusercontent.com/nightscout/cgm-remote-monitor/91cd601038a3bce00f92655cc6b1cc02fa3589d3/static/images/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://raw.githubusercontent.com/nightscout/cgm-remote-monitor/91cd601038a3bce00f92655cc6b1cc02fa3589d3/static/images/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://raw.githubusercontent.com/nightscout/cgm-remote-monitor/91cd601038a3bce00f92655cc6b1cc02fa3589d3/static/images/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://raw.githubusercontent.com/nightscout/cgm-remote-monitor/91cd601038a3bce00f92655cc6b1cc02fa3589d3/static/images/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://raw.githubusercontent.com/nightscout/cgm-remote-monitor/91cd601038a3bce00f92655cc6b1cc02fa3589d3/static/images/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/nightscout/cgm-remote-monitor/91cd601038a3bce00f92655cc6b1cc02fa3589d3/static/images/apple-touch-icon-180x180.png">

</head>

<body>
  <header>
    <h1>Nightscout</h1>
    <p id="connection-status">Connecting...</p>
    <button id="settings-toggle">⚙️ Settings</button>
  </header>

  <main>
    <section class="glucose">
      <h2 id="glucose-value">-- mmol/L</h2>
      <p id="trend">--</p>
    </section>

    <section class="details">
      <div><span>IOB:</span> <strong id="iob">-- U</strong></div>
      <div><span>COB:</span> <strong id="cob">-- g</strong></div>
      <div><span>Pump Battery:</span> <strong id="battery">--%</strong></div>
    </section>

    <!-- Settings Panel -->
    <section id="settings-panel" class="settings hidden">
      <h3>Settings</h3>
      <label>
        Nightscout URL:
        <input type="text" id="ns-url" placeholder="https://your-nightscout.herokuapp.com">
      </label>
      <label>
        Low BG Threshold (mmol/L):
        <input type="number" id="low-threshold" step="0.1" min="0">
      </label>
      <label>
        High BG Threshold (mmol/L):
        <input type="number" id="high-threshold" step="0.1" min="0">
      </label>
      <fieldset>
        <legend>Notifications</legend>
        <label><input type="checkbox" id="notif-low"> Low BG</label>
        <label><input type="checkbox" id="notif-high"> High BG</label>
        <label><input type="checkbox" id="notif-battery"> Pump Battery</label>
      </fieldset>
      <button id="save-settings">Save Settings</button>
    </section>

    <!-- Chart Section -->
    <section class="chart-section">
      <h3>Glucose Trend</h3>
      <div class="chart-controls">
        <button data-hours="4">4h</button>
        <button data-hours="6">6h</button>
        <button data-hours="12">12h</button>
        <button data-hours="24" class="active">24h</button>
      </div>
      <canvas id="glucose-chart" width="400" height="150"></canvas>
    </section>
  </main>

  <footer>
    <p>Nightscout iOS PWA — modern UI with smart alerts</p>
  </footer>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="app.js"></script>
</body>
</html>
